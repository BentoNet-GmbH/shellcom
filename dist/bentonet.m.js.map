{"version":3,"file":"bentonet.m.js","sources":["../src/index.js"],"sourcesContent":["\nclass BentoNet {\n\n    allowedOrigins = [];\n    searchHandlers = [];\n\n    constructor(allowedOrigins) {\n        window.bentonet = this;\n        window.bentonet.allowedOrigins = allowedOrigins;\n        window.bentonet.init();\n    }\n\n    init() {\n        console.log(\"BentoNet: Init connection to platform...\");\n        let parent = window.parent;\n        parent.postMessage({ message: \"APP.STARTUP\" }, \"*\")\n\n        window.addEventListener( \"beforeunload\", function() {\n            console.log(\"BentoNet: Shutdown connection to platform...\");\n            var parent = window.parent;\n            parent.postMessage({ message: \"APP.SHUTDOWN\" }, \"*\")\n        });\n\n        window.addEventListener(\"message\", function(event) {\n            if (!window.bentonet.allowedOrigins.includes(event.origin)) {\n                return;\n            }\n            switch (event.data.message) {\n                case 'BENTONET.SET':\n                    window.sessionStorage.setItem(event.data.key, event.data.value);\n                    break;\n                case 'BENTONET.GET':\n                    let parent = window.parent;\n                    let data = window.sessionStorage.getItem(event.data.key);\n                    let returnPayload = {\n                        message: 'APP.RESPONSE',\n                        key: event.data.key,\n                        value: data\n                    }\n                    parent.postMessage(returnPayload, '*');\n                    break;\n                case 'BENTONET.REMOVE':\n                    window.sessionStorage.removeItem(event.data.key);\n                    break;\n                case 'SEARCH.START':\n                    window.bentonet.searchHandlers.forEach( handler => {\n                        handler(event.data.value);\n                    })\n            }\n        });\n    }\n\n    showSearchField(show) {\n        let parent = window.parent;\n        let message = show === true ? \"SEARCH.ENABLE\" : \"SEARCH.DISABLE\";\n        parent.postMessage({ message: message }, \"*\")\n    }\n\n    autoEnableSearchField() {\n        if(window.bentonet.searchHandlers.length > 0) {\n            window.bentonet.showSearchField(true )\n        } else {\n            window.bentonet.showSearchField( false )\n        }\n    }\n\n    addSearchHandler(handler) {\n        window.bentonet.searchHandlers.push(handler);\n        window.bentonet.autoEnableSearchField();\n    }\n\n    removeSearchHandler(handler) {\n        window.bentonet.searchHandlers.forEach( (h, i) => {\n            if(h === handler) {\n                window.bentonet.searchHandlers.splice(i, 1);\n                window.bentonet.autoEnableSearchField();\n                return\n            }\n        })\n    }\n\n    showInfo(title, info) {\n        let parent = window.parent;\n        parent.postMessage({ message: \"APP.INFO\", key: \"content\", value: { title: title, text: info}  }, \"*\")\n    }\n\n    showWarning(title, warning) {\n        let parent = window.parent;\n        parent.postMessage({ message: \"APP.WARNING\", key: \"content\", value: { title: title, text: warning}  }, \"*\")\n    }\n\n    showError(title, error) {\n        let parent = window.parent;\n        parent.postMessage({ message: \"APP.ERROR\", key: \"content\", value: { title: title, text: error}  }, \"*\")\n    }\n\n    showSuccess(title, message) {\n        parent.postMessage({ message: \"APP.SUCCESS\", key: \"content\", value: { title: title, text: message}  }, \"*\")\n    }\n}\n\nexport { BentoNet };"],"names":["BentoNet","allowedOrigins","searchHandlers","window","bentonet","this","init","console","log","parent","postMessage","message","addEventListener","event","includes","origin","data","sessionStorage","setItem","key","value","getItem","removeItem","forEach","handler","showSearchField","show","autoEnableSearchField","length","addSearchHandler","push","removeSearchHandler","h","i","splice","showInfo","title","info","text","showWarning","warning","showError","error","showSuccess"],"mappings":"AACMA,IAAAA,aAKF,WAAYC,QAHZA,eAAiB,QACjBC,eAAiB,GAGbC,OAAOC,SAAWC,KAClBF,OAAOC,SAASH,eAAiBA,EACjCE,OAAOC,SAASE,kCAGpBA,KAAA,WACIC,QAAQC,IAAI,4CACCL,OAAOM,OACbC,YAAY,CAAEC,QAAS,eAAiB,KAE/CR,OAAOS,iBAAkB,eAAgB,WACrCL,QAAQC,IAAI,gDACCL,OAAOM,OACbC,YAAY,CAAEC,QAAS,gBAAkB,OAGpDR,OAAOS,iBAAiB,UAAW,SAASC,GACxC,GAAKV,OAAOC,SAASH,eAAea,SAASD,EAAME,QAGnD,OAAQF,EAAMG,KAAKL,SACf,IAAK,eACDR,OAAOc,eAAeC,QAAQL,EAAMG,KAAKG,IAAKN,EAAMG,KAAKI,OACzD,MACJ,IAAK,eACD,IAAIX,EAASN,OAAOM,OAChBO,EAAOb,OAAOc,eAAeI,QAAQR,EAAMG,KAAKG,KAMpDV,EAAOC,YALa,CAChBC,QAAS,eACTQ,IAAKN,EAAMG,KAAKG,IAChBC,MAAOJ,GAEuB,KAClC,MACJ,IAAK,kBACDb,OAAOc,eAAeK,WAAWT,EAAMG,KAAKG,KAC5C,MACJ,IAAK,eACDhB,OAAOC,SAASF,eAAeqB,QAAS,SAAAC,GACpCA,EAAQX,EAAMG,KAAKI,eAMvCK,gBAAA,SAAgBC,GACCvB,OAAOM,OAEbC,YAAY,CAAEC,SADE,IAATe,EAAgB,gBAAkB,kBACP,QAG7CC,sBAAA,WACOxB,OAAOC,SAASF,eAAe0B,OAAS,EACvCzB,OAAOC,SAASqB,iBAAgB,GAEhCtB,OAAOC,SAASqB,iBAAiB,MAIzCI,iBAAA,SAAiBL,GACbrB,OAAOC,SAASF,eAAe4B,KAAKN,GACpCrB,OAAOC,SAASuB,2BAGpBI,oBAAA,SAAoBP,GAChBrB,OAAOC,SAASF,eAAeqB,QAAS,SAACS,EAAGC,GACxC,GAAGD,IAAMR,EAGL,OAFArB,OAAOC,SAASF,eAAegC,OAAOD,EAAG,QACzC9B,OAAOC,SAASuB,6BAM5BQ,SAAA,SAASC,EAAOC,GACClC,OAAOM,OACbC,YAAY,CAAEC,QAAS,WAAYQ,IAAK,UAAWC,MAAO,CAAEgB,MAAOA,EAAOE,KAAMD,IAAU,QAGrGE,YAAA,SAAYH,EAAOI,GACFrC,OAAOM,OACbC,YAAY,CAAEC,QAAS,cAAeQ,IAAK,UAAWC,MAAO,CAAEgB,MAAOA,EAAOE,KAAME,IAAa,QAG3GC,UAAA,SAAUL,EAAOM,GACAvC,OAAOM,OACbC,YAAY,CAAEC,QAAS,YAAaQ,IAAK,UAAWC,MAAO,CAAEgB,MAAOA,EAAOE,KAAMI,IAAW,QAGvGC,YAAA,SAAYP,EAAOzB,GACfF,OAAOC,YAAY,CAAEC,QAAS,cAAeQ,IAAK,UAAWC,MAAO,CAAEgB,MAAOA,EAAOE,KAAM3B,IAAa"}