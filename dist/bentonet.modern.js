class e{constructor(e,n){this.allowedOrigins=["bentonet.de"],this.searchHandlers=[],this.startupObservers=[],this.observers=[],window.bentonet=this,e instanceof Function&&window.bentonet.startupObservers.push(e),null!==n&&(window.bentonet.allowedOrigins=n),window.bentonet.init()}init(){console.log("BentoNet: Init connection to platform..."),window.parent.postMessage({message:"APP.STARTUP"},"*"),window.addEventListener("beforeunload",function(){console.log("BentoNet: Shutdown connection to platform..."),window.parent.postMessage({message:"APP.SHUTDOWN"},"*")}),window.addEventListener("message",function(e){if(window.bentonet.checkAllowedOrigins(e.origin))switch(e.data.message){case"BENTONET.STARTUP":window.sessionStorage.setItem(e.data.key,e.data.value),window.bentonet.startupObservers.forEach(n=>{n(e.data.key,e.data.value)});break;case"BENTONET.SET":window.sessionStorage.setItem(e.data.key,e.data.value),window.bentonet.observers.forEach(n=>{n(e.data.key,e.data.value)});break;case"BENTONET.GET":let n=window.parent,t=window.sessionStorage.getItem(e.data.key);n.postMessage({message:"APP.RESPONSE",key:e.data.key,value:t},"*");break;case"BENTONET.REMOVE":window.sessionStorage.removeItem(e.data.key);break;case"SEARCH.START":window.bentonet.searchHandlers.forEach(n=>{n(e.data.value)})}else console.log("BentoNet: "+e.origin+" is not an allowed domain for messaging.")})}checkAllowedOrigins(e){let n=!1;return window.bentonet.allowedOrigins.forEach(t=>{e.toLowerCase().endsWith(t.toLowerCase())&&(n=!0)}),n}showSearchField(e){window.parent.postMessage({message:!0===e?"SEARCH.ENABLE":"SEARCH.DISABLE"},"*")}autoEnableSearchField(){window.bentonet.searchHandlers.length>0?window.bentonet.showSearchField(!0):window.bentonet.showSearchField(!1)}addSearchHandler(e){e instanceof Function&&window.bentonet.searchHandlers.push(e),window.bentonet.autoEnableSearchField()}removeSearchHandler(e){window.bentonet.searchHandlers.forEach((n,t)=>{n===e&&(window.bentonet.searchHandlers.splice(t,1),window.bentonet.autoEnableSearchField())})}addObserver(e){e instanceof Function&&window.bentonet.observers.push(e)}removeObserver(e){window.bentonet.observers.forEach((n,t)=>{n===e&&window.bentonet.observers.splice(t,1)})}showInfo(e,n){window.parent.postMessage({message:"APP.INFO",key:"content",value:{title:e,text:n}},"*")}showWarning(e,n){window.parent.postMessage({message:"APP.WARNING",key:"content",value:{title:e,text:n}},"*")}showError(e,n){window.parent.postMessage({message:"APP.ERROR",key:"content",value:{title:e,text:n}},"*")}showSuccess(e,n){parent.postMessage({message:"APP.SUCCESS",key:"content",value:{title:e,text:n}},"*")}}export{e as BentoNet};
//# sourceMappingURL=bentonet.modern.js.map
