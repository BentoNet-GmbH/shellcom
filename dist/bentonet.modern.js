class e{constructor(e){this.allowedOrigins=[],this.searchHandlers=[],window.bentonet=this,window.bentonet.allowedOrigins=e,window.bentonet.init()}init(){console.log("BentoNet: Init connection to platform..."),window.parent.postMessage({message:"APP.STARTUP"},"*"),window.addEventListener("beforeunload",function(){console.log("BentoNet: Shutdown connection to platform..."),window.parent.postMessage({message:"APP.SHUTDOWN"},"*")}),window.addEventListener("message",function(e){if(window.bentonet.allowedOrigins.includes(e.origin))switch(e.data.message){case"BENTONET.SET":window.sessionStorage.setItem(e.data.key,e.data.value);break;case"BENTONET.GET":let n=window.parent,t=window.sessionStorage.getItem(e.data.key);n.postMessage({message:"APP.RESPONSE",key:e.data.key,value:t},"*");break;case"BENTONET.REMOVE":window.sessionStorage.removeItem(e.data.key);break;case"SEARCH.START":window.bentonet.searchHandlers.forEach(n=>{n(e.data.value)})}})}showSearchField(e){window.parent.postMessage({message:!0===e?"SEARCH.ENABLE":"SEARCH.DISABLE"},"*")}autoEnableSearchField(){window.bentonet.searchHandlers.length>0?window.bentonet.showSearchField(!0):window.bentonet.showSearchField(!1)}addSearchHandler(e){window.bentonet.searchHandlers.push(e),window.bentonet.autoEnableSearchField()}removeSearchHandler(e){window.bentonet.searchHandlers.forEach((n,t)=>{if(n===e)return window.bentonet.searchHandlers.splice(t,1),void window.bentonet.autoEnableSearchField()})}showInfo(e,n){window.parent.postMessage({message:"APP.INFO",key:"content",value:{title:e,text:n}},"*")}showWarning(e,n){window.parent.postMessage({message:"APP.WARNING",key:"content",value:{title:e,text:n}},"*")}showError(e,n){window.parent.postMessage({message:"APP.ERROR",key:"content",value:{title:e,text:n}},"*")}showSuccess(e,n){parent.postMessage({message:"APP.SUCCESS",key:"content",value:{title:e,text:n}},"*")}}export{e as BentoNet};
//# sourceMappingURL=bentonet.modern.js.map
